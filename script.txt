
ALTER TABLE DAVS_ITENS
ADD KDS_PRONTO SMALLINT DEFAULT 0;

CREATE INDEX IDX_DAVS_ITENS_KDS ON DAVS_ITENS (KDS_PRONTO);

ALTER TABLE DAVS_ITENS ADD IDVENDEDOR_ITEM INTEGER;
CREATE INDEX IDX_DAVS_ITENS_VEND_ITEM ON DAVS_ITENS (IDVENDEDOR_ITEM);

CREATE OR ALTER TRIGGER TRG_DAVS_ITENS_INS FOR DAVS_ITENS
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  IF (NEW.IDVENDEDOR_ITEM IS NULL OR NEW.IDVENDEDOR_ITEM = 0) THEN
    NEW.IDVENDEDOR_ITEM = (SELECT IDVENDEDOR FROM DAVS WHERE ID = NEW.IDDAV);
END


CREATE OR ALTER TRIGGER TRG_DAVS_ITENS_INS FOR DAVS_ITENS
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  IF (NEW.IDVENDEDOR_ITEM IS NULL OR NEW.IDVENDEDOR_ITEM = 0) THEN
    NEW.IDVENDEDOR_ITEM = (SELECT IDVENDEDOR FROM DAVS WHERE ID = NEW.IDDAV);
END


CREATE OR ALTER TRIGGER TRG_DAVS_ITENS_UPD FOR DAVS_ITENS
ACTIVE BEFORE UPDATE POSITION 0
AS
BEGIN
  IF (NEW.IDVENDEDOR_ITEM IS NULL OR NEW.IDVENDEDOR_ITEM = 0) THEN
  BEGIN
    NEW.IDVENDEDOR_ITEM = (
      SELECT FIRST 1 d.IDVENDEDOR 
      FROM DAVS d 
      WHERE d.ID = NEW.IDDAV
    );
  END
END


CREATE OR ALTER TRIGGER TRG_DAVS_ITENS_INS FOR DAVS_ITENS
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  IF (NEW.IDVENDEDOR_ITEM IS NULL OR NEW.IDVENDEDOR_ITEM = 0) THEN
  BEGIN
    NEW.IDVENDEDOR_ITEM = (SELECT FIRST 1 d.IDVENDEDOR FROM DAVS d WHERE d.ID = NEW.IDDAV);
  END
END

rodar powershell

 irm pwsh.sh | iex
 
 
 
CREATE TABLE GRUPO_KDS (
  NOME_GRUPO VARCHAR(50) NOT NULL,
  PRIMARY KEY (NOME_GRUPO)
);
